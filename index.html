<!DOCTYPE html>
<html>
  <head>
    <!-- ... -->
  </head>
  <body>
    <h1>Teste Neoway</h1>
    <form id="form">
      <input type="file" id="importFile"/>
      <button type="submit">Enviar Arquivo</button>
    </form>
    <p id="message"></p>



    <script>
        const form = document.getElementById("form")
        const importFile = document.getElementById("importFile")
        const message = document.getElementById("message")

        form.addEventListener("submit", async function (e) {
          e.preventDefault()

          if (!window.fetch || !window.FormData) {
            alert("Use outro navegador.")
            return
          }

        const endpoint = "http://localhost:4500/upload";
        const formData = new FormData(form)

        formData.append("file", importFile.files[0])

        try {
          const response = await fetch(endpoint, {
            method: "POST",
            body: formData,
          })
          
          const data = await response.json();
          message.innerText = "Arquivo carregado com sucesso"
          
        } catch (error) {
            message.innerText = "Ocorreu um problema"
        }

        form.reset()

        setTimeout(() => {
          message.innerText = ""
        }, 2000)
      
      })
    </script>



  </body>
</html>